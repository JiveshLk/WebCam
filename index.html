<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera App</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden; /* Prevent scrolling */
        }
        #video-container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f0f0f0; /* Optional: Add a background color */
            position: relative;
        }
        video {
            width: auto;
            height: auto;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain; /* Maintain aspect ratio */
            transform: scaleX(-1); /* Flip the video horizontally */
        }
        #debug-area {
            position: fixed;
            top: 0;
            left: 0;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 10px;
            font-family: Arial, sans-serif;
            font-size: 14px;
            z-index: 9999;
        }
    </style>
</head>
<body>
    <div id="video-container">
        <video id="video" autoplay></video>
    </div>
    <div id="debug-area"></div>

    <script>
        const video = document.getElementById('video');
        const videoContainer = document.getElementById('video-container');
        const debugArea = document.getElementById('debug-area');

        function resizeVideo() {
            const aspectRatio = video.videoWidth / video.videoHeight;
            const containerAspectRatio = videoContainer.offsetWidth / videoContainer.offsetHeight;

            debugArea.innerHTML = `
                Aspect Ratio: ${aspectRatio.toFixed(2)}<br>
                Container Aspect Ratio: ${containerAspectRatio.toFixed(2)}<br>
                Video Dimensions: ${video.videoWidth}x${video.videoHeight}
            `;

            if (aspectRatio > containerAspectRatio) {
                video.style.width = '100%';
                video.style.height = 'auto';
            } else {
                video.style.width = 'auto';
                video.style.height = '100%';
            }
        }

        window.addEventListener('resize', resizeVideo);
        video.addEventListener('loadedmetadata', resizeVideo);

        // Check if the browser supports WebRTC
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function (stream) {
                    const track = stream.getVideoTracks()[0];
                    const capabilities = track.getCapabilities();

                    if (capabilities.aspectRatio) {
                        const aspectRatio = capabilities.aspectRatio;
                        const width = Math.round(640 * aspectRatio); // You can adjust the initial width here
                        const height = 640; // You can adjust the initial height here
                        const videoConstraints = { width: { ideal: width }, height: { ideal: height } };
                        
                        navigator.mediaDevices.getUserMedia({ video: videoConstraints })
                            .then(function (stream) {
                                // Display the video stream in the video element
                                video.srcObject = stream;
                            })
                            .catch(function (error) {
                                console.error('Error accessing camera:', error);
                                debugArea.innerHTML = `Error accessing camera: ${error.message}`;
                            });
                    }
                })
                .catch(function (error) {
                    console.error('Error accessing camera:', error);
                    debugArea.innerHTML = `Error accessing camera: ${error.message}`;
                });
        } else {
            console.error('WebRTC is not supported in this browser.');
            debugArea.innerHTML = 'WebRTC is not supported in this browser.';
        }
    </script>
</body>
</html>
